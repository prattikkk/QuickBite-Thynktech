{
  "annotations": { "list": [] },
  "editable": true,
  "panels": [
    {
      "title": "Orders Placed (rate/5m)",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 0 },
      "targets": [
        { "expr": "rate(quickbite_orders_placed_total[5m])", "legendFormat": "orders/s" }
      ]
    },
    {
      "title": "Orders Delivered (rate/5m)",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 0 },
      "targets": [
        { "expr": "rate(quickbite_orders_delivered_total[5m])", "legendFormat": "delivered/s" }
      ]
    },
    {
      "title": "Orders Cancelled (rate/5m)",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 0 },
      "targets": [
        { "expr": "rate(quickbite_orders_cancelled_total[5m])", "legendFormat": "cancelled/s" }
      ]
    },
    {
      "title": "Payment Success Rate",
      "type": "gauge",
      "gridPos": { "h": 8, "w": 8, "x": 0, "y": 8 },
      "targets": [
        { "expr": "quickbite_payments_successful_total / (quickbite_payments_successful_total + quickbite_payments_failed_total)", "legendFormat": "success rate" }
      ]
    },
    {
      "title": "Dispatch Success Rate",
      "type": "gauge",
      "gridPos": { "h": 8, "w": 8, "x": 8, "y": 8 },
      "targets": [
        { "expr": "quickbite_dispatch_assignments_total / (quickbite_dispatch_assignments_total + quickbite_dispatch_failures_total)" }
      ]
    },
    {
      "title": "Chat Messages (rate/5m)",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 8, "x": 16, "y": 8 },
      "targets": [
        { "expr": "rate(quickbite_chat_messages_sent_total[5m])" }
      ]
    },
    {
      "title": "Delivery Time (p50/p95)",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 12, "x": 0, "y": 16 },
      "targets": [
        { "expr": "histogram_quantile(0.95, rate(quickbite_orders_delivery_time_seconds_bucket[5m]))", "legendFormat": "p95" },
        { "expr": "histogram_quantile(0.50, rate(quickbite_orders_delivery_time_seconds_bucket[5m]))", "legendFormat": "p50" }
      ]
    },
    {
      "title": "HTTP Request Rate",
      "type": "timeseries",
      "gridPos": { "h": 8, "w": 12, "x": 12, "y": 16 },
      "targets": [
        { "expr": "rate(http_server_requests_seconds_count[5m])", "legendFormat": "{{ method }} {{ uri }}" }
      ]
    }
  ],
  "refresh": "10s",
  "schemaVersion": 38,
  "tags": ["quickbite", "phase4"],
  "time": { "from": "now-1h", "to": "now" },
  "title": "QuickBite Phase 4 Business Dashboard",
  "uid": "quickbite-phase4",
  "version": 1
}
